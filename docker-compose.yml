# Docker Compose конфигурация для запуска frontend-приложения
# Использование: docker-compose up --build
#
# Настройка backend:
# По умолчанию: localhost:8090
# Изменить: BACKEND_URL=http://air-task-back:8090 docker-compose up -d

version: '3.8'

services:
  # Сервис frontend-приложения
  air-task-front:
    # Собираем образ из Dockerfile в текущей директории
    build:
      context: .
      dockerfile: Dockerfile
    # Перезапуск контейнера при падении
    restart: unless-stopped
    # Проброс портов: внешний:внутренний
    ports:
      - "8080:80"
    # Адрес backend-сервера (используется в nginx.conf)
    # По умолчанию: localhost:8090 (для случая, когда backend на той же машине)
    # Для Docker: http://host.docker.internal:8090 (чтобы обратиться к хосту)
    # Или: http://air-task-back:8090 (если backend в том же docker-compose)
    environment:
      - BACKEND_URL=${BACKEND_URL:-http://localhost:8090}
    # Имя контейнера для удобства
    container_name: air-task-front
